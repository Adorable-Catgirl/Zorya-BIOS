xpcall(function()local a,b,c,d,e,f,tonumber,tostring,assert,load,g=component.proxy,component.list,component.invoke,string.format,string.rep,string.char,tonumber,tostring,assert,load,computer.pullSignal;local h,i,j,k,l,m,n,o,p="0V0\16\6\7*\x86H\xce=\2\1\6\5+\x81\4\n\3B\4?\xd9Eq\23E\xeaq\xcf8\xfe4\xcf\xd85\xbc\25`\x84$g\xd09y\19LiW\xb1\xa0\\\xa2[o\xcb\xdbI\xae\xd2\xbd\xcd\xa0\xb5\x86\xa0\xd1\x88\xbd\x9a\xf2g\xe9\xc8\xd5\xac\xb5O\x90\17Ou\xaf\3W","[09].+",f(0),b("da")(),b("int")(),b("ee")(),"%.2x","/init.lua","zorya-modules/"_ZVER,_ZVER_PATCH,_BIOS=2.0,0,"Zorya"if k then k=a(k)if not k.ecdsa then _BSIGN=true;k=nil else h=k.deserializeKey(h,"ec-public")end end;if l then l=a(l)end;local function q(k)local r=0;for s=1,#k do r=r~(k:byte(s)<<8)for t=1,8 do if r&0x8000 then r=r~(0x1070<<3)end;r=r<<1 end end;return r>>8&0xFF end;local function u(k)k=k or e(j,16)k=e(j,16-#k)return d(d("%s-%s%s",e(n,4),e(n..n.."-",3),e(n,6)),string.byte(k,1,16))end;local function v(w)w=w:gsub("%-","")local x=""for s=1,#w,2 do x=x..f(tonumber(w:sub(s,s+1),16))end;return x end;local function z(fs,A)local B=assert(c(fs,"open",A))local C=""repeat local k=c(fs,"read",B,math.huge)C=C..(k or"")until not k;c(fs,"close",B)return C end;local function D(fs,A)return load(z(fs,A),"=hd("..fs:sub(1,3).."...)/"..A)end;function verify(A,E)if not k then return true end;return k.ecdsa(A,h,E)end;local F=m.getData()local function G(H,I)return setmetatable({},{__call=H,__tostring=function()return I end})end;local function J(K)return nil,K end;local function L()local M=m.getData()return M:byte(#M)end;local function N(A,E)if verify(A,E)then local O,K=load(A)if O then m.set(A)return true end;return O,K end;return nil,"BIOS signing enforced."end;function component.invoke(w,P,...)if w==m.address then if P=="get"then return J("BIOS is locked.")elseif P=="set"then return J("BIOS signing enforced.")elseif P=="makeReadonly"then return J("Opperation not supported.")elseif P=="getChecksum"then return L()elseif P=="setSign"then return N(...)end end;return c(w,P,...)end;function component.proxy(w)if w==m.address then local Q=a(w)Q.getChecksum=L;function Q.get()return J("BIOS is locked")end;function Q.set()return J("BIOS signing enforced")end;function Q.makeReadonly()return J("Opperation not supported")end;Q.setSign=N;return Q end;return a(w)end;local R=a(b("gpu")())local S,T=R.set,R.fll;local U=b("screen")()R.bind(U)local V,W=R.getResolution()S(1,1,"Zorya BIOS ".._ZVER.." Bootstrap")local function X(K)S(1,W-1,"Error: "..K)S(1,W,"Strike any key to load defaults.")while true do if g()=="key_down"then break end end;while true do if g()=="key_up"then break end end;local Y;for fs in b("filesystem")do if c(fs,"isDirectory","zorya-modules")then Y=fs;break end end;if not Y then T(1,2,V,W," ")S(1,W-1,"Cannot find Zorya Modules. Cannot continue.")S(1,W,"Press any key to shut down.")while true do if g()=="key_down"then break end end;while true do if g()=="key_up"then break end end;computer.shutdown()end;local Z=f(1)..j:rep(17).."F"Z=Z..j:rep(192-#Z)..v(Y)..j:rep(31)Z=Z..f(q(Z))m.setData(Z)end;local _=m.getData()if _==""then X("CMOS not set.")end;local L=_:byte(#_)if q(_:sub(1,#_-1))~=L then X("CMOS checksum error.")end;local a0=_:byte(1)local a1=u(_:sub(2,17))local a2=_:byte(18)local a3=_:sub(19,19+a2)local a4=_:sub(20+a2,20+a2)=="T"local Y=_:sub(193,209)local a5=a(Y)local a6=fs.dir(p)R.setResolution(V,W)R.setBackground(0)R.setForeground(0xFFFFFF)T(1,1,V,W," ")local a7=function()T(1,1,V,W," ")y=1 end;local y=1;local function a8(a9)if R and U then S(1,y,a9)if y==W then R.copy(1,2,V,W-1,0,-1)T(1,W,V,1," ")else y=y+1 end end end;a7()local aa={}function aa.getMode()return"zorya"end;local ab={}ab.hand={}ab.boot={}ab.args={}ab.scan={}ab.set={}ab.net=l;ab.gpu=R;ab.cls=a7;ab.w=V;ab.h=W;ab.cls=a7;ab.status=a8;ab.loadfile=D;ab.device=Y;table.sort(a6)for s=1,#a6 do local ac=a6[s]if ac:match(i)then if not verify(z(Y,p..ac..o),z(Y,p..ac.."/.sig"))then error("Couldn't verify module "..ac:sub(1,#ac-1))end end;assert(D(Y,p..ac..o))()end end,function(ad)error(ad.."\n"..debug.traceback())end)